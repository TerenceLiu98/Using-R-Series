---
title: "R-Review"
author: "Terence Lau"
date: "12/15/2018"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r message = FALSE< results = 'hide'}
source('mycode.R')
```
## Basic Arithmetic and Objects 

R has comman line interface and will accept simple commands to it. This is marked by a $>$ symbol, called the **prompt**. If you type a command and press return, **R** will evaluate it and print the result for you.
```{r}
6 + 9
# [1] 15

x <- 15
x - 1 

#[1] 14
```

The expression `x <- 15` creates a variable called `x` and gives it the  values $15$. This is called **assignment**; the variable on the left is assigned to the value on the right. The left hand side must contain only contain a single variable.`x + 4 <- 15 # This command will not work`

Assginment can also be done with `=` or `->`.
```{r}
x = 5
5 * x -> x
x
#[1] 25
```

The operators `=` and `<-` are identical, but many people prefer `<-` because it is not used in any other context, but `=` is, so there is less room for confusion.

## Vectors 

The key feature which makes $R$ very useful for statistics is that it is **vectorized**. This means that many operations can be performed point-wise on a vector. The function`c()` is used to create vectors.

```{r}
x <- c(1, -1, 3.5, 2)
x
# [1]  1.0 -1.0  3.5  2.0
```

Then if we want to add $2$ to everything in this vector, or to square each entry:

```{r}
x + 2
# [1] 3.0 1.0 5.5 4.0

x^2

# [1] 1.00 1.00 12.25 4.00
```

This is very useful in statistics:

```{r}
sum((x - mean(x))^2)

#[1] 10.69
```

### Exercise 2.1

The weights of five people before and after a diet programme are given in the table.

|------|--|--|--|--|---|
|Before|78|72|78|79|105|
|After|67|65|79|70|93|

Read the 'before' and 'after' values into two different vectors called **before** and **after**. Use `R` to evaluate the amount of weight lost for each participant. What is the average amount of weight lost?

**Answer**

```{r}
Before <- c(78,72,78,79,105)
After <- c(67,65,79,70,93)
Before <- as.vector(Before)
After <- as.vector(After)
lost <- Before - After
average_lost <- mean(lost)
print(average_lost)
```


### Exercise 2.2

How would you write a function equivalent to `sum((x - mean(x))^2)` in a language like C or Java ?

Some useful vectors can be created quckly with `R`. The colon operator is used to generate integer sequences

```{r}
1:10

# [1]  1  2  3  4  5  6  7  8  9 10

-3:4

# [1] -3 -2 -1  0  1  2  3  4

9:5

# [1] 9 8 7 6 5
```

More generally, the function `seq()` can generate any arithmetic progression.

```{r}
seq(from = 2, to = 6, by = 0.4)
# [1] 2.0 2.4 2.8 3.2 3.6 4.0 4.4 4.8 5.2 5.6 6.0
seq(from = -1, to = 1, length = 6)
# [1] -1.0 -0.6 -0.2  0.2  0.6  1.0
```

Sometimes it's neccesary to have repeated values,for which we use `rep()`

```{r}
rep(5,3)
# [1] 5 5 5
rep(2:5, each = 3)
# [1] 2 2 2 3 3 3 4 4 4 5 5 5
rep(-1:3, length.out=10)
# [1] -1  0  1  2  3 -1  0  1  2  3
```

We can also use `R`'s vectorization to create more interesting sequences:

```{r}
2^(0:10)
# [1] 1 2 4 8 16 32 64 128 256 5121024
1:3 + rep(seq(from = 0, by = 10, to = 30), each = 3)
# [1] 1 2 3 11 12 13 21 22 23 31 32 33
```

The last example demonstrates **recycling**, which is also an important part of vectorization. If we perform a binary operation ( such as `+`) on two vectors of different lengths, the shorter one is used over and over again until the operation has been applied to every entry in the longer one. If the longer length is not a multiple of the shorter length, a warning is given.

```{r}
1:10 * c(-1,1)
# [1]-1 2-3 4-5 6-7 8-910
1:7 * 1:2
# [1] 1 4 3 8 5 12 7
```

### Exercise 2.4

The $i$th term in the Taylor expansion of $log(1 + x)$ is $(-1)^{i+1}x^i / i$. Create a vector containing the first $100$ terms for $x = 0.5$. *Write out the first few entries by hand if that helps]*.

$$\displaystyle r_n(x) = log(1 + x) - \sum^n_{i=1} \frac{(-1)^{i+1}x^i}{i}$$
Evaluate $r_n(1)$ for $n = 10, 100, 1000, \dots, 10^6$

## Subsetting 

It's frequently neccersary to extract some of the elements of a larger vector. In `R` you can use square brackets to select an individual element or group of elements:

```{r}
x <- c(5,9,2,14,-4)
x[3]

# note indexing starts from 1
x[c(2,3,5)]

x[1:3]

x[3:length(x)]
```

There are two other methods for getting subvectors. The first is using a logical vector(i.e. containing `TRUE` and `FALSE`) of the same length:

```{r}
x > 4

x[x>4]
```

or using negative indices to specify which elements should not be selected:

```{r}
x[-1]

x[-c(1,4)]
```

(Note that this is rather different to what other languages such as `C` or `python` would interpret negative indices to mean)

### Exercise 2.5 

The built-in vector **LETTERS** contains the uppercase letters of the alphabet. Produce a vecotr of 
* the first 12 letters; 
* the odd 'numbered' letters;
* the (English) consonants.

**Answer**
```{r}
# Question One
LETTERS[1:12]

# Question Two 
letter_odd <- LETTERS[seq(1,length(LETTERS),2)]

a <- which(LETTERS == "A")
e <- which(LETTERS =="E")
i <- which(LETTERS =="I")
o <- which(LETTERS =="O")
u <- which(LETTERS =="U")

vowel <- as.vector(rbind(a,e,i,o,u))

LETTERS_consonant <- LETTERS[-vowel]
print(LETTERS_consonant)
```


## Logical Operators 

As we see above, the comparison operator `>` returns a logical vector indicating whether or not the left hand side is greater than the right hand side.
Here we demonstrate the other comparison opertors:

```{r}
x <= 2 # less than or equal to 

x == 2 # equal to

x != 2 # not equal to 
```

Note the double equals sign `==`, to distinguish between assignment and comparison.

We may also wish to combine logical vectors. If we want the elements of $x$ within a range, we can use the folloing:

```{r}
(x > 0) & (x < 10) #'and'
```

The `&` operator does a pointwise 'and' comparison between the two sides. Sinilarly, the vertical bar `|` does pointwise 'or', and the unary `!` operator performs negation.

### Exercise 2.6

The function `rnorm()` generates normal random variables. For instance, `rnorm(10)` gives a vector of 10 i.i.d. standard normals. Generate 20 standard normals, and store them as $x$. Then obtain subvectors of:
* the entries in x which are less than 1;
* the entries between $\frac{1}{2}$ and 1;
* the entries whose absolute value is larger than 1.5

**Answer**
```{r}
x <- rnorm(10) # initial x

# question one
x.less_1 <- x[x < 1]
print(x.less_1)
# question two 
x.between_0.5_1 <- x[ x > 0.5 & x < 1]
print(x.between_0.5_1)
# question three 
x.larger_1.5 <- x[x > 1.5]
print(x.larger_1.5)
```

## Character Vectors 

As you might have noticed in the exercise above, vectors don't have to contain numbers. We can equally create a **character vector**, in which each entry is a string of text. Strings in `R` are contained within double quote : 
```{r}
x <- c("Hello", "how do you do", "lovely to meet you", 42)
print(x)
```

Notice that you cannot mix numbers with strings: if you try to do so the number will be converted into a string. Otherwise character vecotrs are much like their numberical counterparts

```{r}
x[2:3]
x[-4]
c(x[1:2],"goodbye")
```

## matrices 

Matrices are much used in statistics, and so play an important role in `R`. To create a matrix use the function `matrix()`, specifying elements by column first:
```{r}

```




















